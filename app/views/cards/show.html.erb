<%= render partial: "show_header" %>
<div class="page-title-container">
  <div class="container">
    <div class="page-title pull-left">
      <h2 class="entry-title" id="<%= @card.card_name.id%>"><%= @card.card_name.name %></h2>
    </div>
    <ul class="breadcrumbs pull-right">
      <li><a href="/">HOME</a></li>
      <li><%= link_to "CARDS", cards_path, class: "active" %></li>
    </ul>
  </div>
</div>
<section id="content" class="gray-area">
  <div class="container car-detail-page">
    <div class="row">
      <div id="main" class="col-md-9">
        <div class="tab-container">
          <ul class="tabs">
            <li class="active">
              <a href="#car-details" data-toggle="tab">Card Details</a>
            </li>
          </ul>

          <!-- Main Card Description -->
          <div class="tab-content card-description">
            <div class="tab-pane fade in active" id="car-details">
            <h2>Card Information</h2>
            <ul>
            <% n = 1 %>
            <% @card.card_name.information.each do |info| %>
              <li id="information-<%= n %>"><%= info %></li>
              <% n += 1 %>
              <% end %>
            </ul>
            <br />
            <h2>Card Categories</h2>
              <div class="car-features box">
                <div class="row add-clearfix">
                  <% @card.category_list.each do |category| %>
                    <div class="col-sms-6 col-sm-6 col-md-4">
                      <span class="icon-box style2">
                      <i class="soap-icon-plane-right circle"></i><%= link_to category.parse_category_name, category_path(category) %>
                      </span>
                    </div>
                  <% end %>
                </div>
              </div>
              <% if @card.card_has_bonus? %>
                <h2>Bret's Special Sauce</h2>
                <div class="car-features box bonus-information-side">
                  <div class="row add-clearfix">
                    <div class="col-sms-6 col-sm-6 col-md-4">
                      <span class="icon-box style2">
                        <i class="soap-icon-beach circle"></i>Sign Up Bonus: <%= @card.rewards.first.amount %> Miles
                      </span>
                    </div>
                    <div class="col-sms-6 col-sm-6 col-md-4">
                      <span class="icon-box style2">
                        <i class="soap-icon-savings circle"></i>Spending Requirement: <%= number_to_currency(@card.rewards.first.spending_amount, precision: 0) %>
                      </span>
                    </div>
                    <div class="col-sms-6 col-sm-6 col-md-4">
                      <span class="icon-box style2">
                        <i class="soap-icon-calendar circle"></i>Length of Time: <%= pluralize(@card.rewards.first.length_of_time, "Month") %>
                      </span>
                    </div>
                  </div>
                </div>
                <div class='col-md-12 apply-here'>
                  <%= button_to "Apply Here", @card.rewards.first.apply_link, :method => "get", class: "btn btn-success btn-lg btn-block"  %>
                </div>
              <% end %>
            </div>
            <div class="tab-pane fade in" id="car-upgrade">

            </div>
          </div>
          <!-- End - Main Card Description -->
        </div>
      </div>

      <!-- Side Panel - Card Info -->
      <div class="sidebar col-md-3">
        <article class="detailed-logo">
          <figure>
            <%= image_tag(@card.card_name.image_link) %>
          </figure>
          <div class="details">
            <h2 class="box-title"><%= @card.card_name.name %><small></small></h2>
            <div class="card-info-box">
                <div class="mile clearfix">
                  <span class="skin-color">Annual Fee:</span>
                  <div class="mileage pull-center"><%= @card.card_name.annual_fee %></div>
                </div>
                 <div class="mile clearfix">
                  <span class="skin-color">Intro Rate:</span>
                  <div class="mileage pull-center"><%= @card.card_name.intro_rate %></div>
                </div>
                <div class="mile clearfix">
                  <span class="skin-color">APR:</span>
                  <div class="mileage pull-center"><%= @card.card_name.apr %></div>
                </div>
              </div>
              <h3 class="box-title">Bonus Information</h3>
              <div class="bonus-information">
                <% if @card.card_has_bonus? %>
                  <div class="mile clearfix">
                    <span class="skin-color">Sign Up Bonus:</span>
                    <span class="mileage pull-right"><%= @card.rewards.first.amount %></span>
                  </div>
                  <div class="mile clearfix">
                    <span class="skin-color">Spending Requirements:</span>
                    <span class="mileage pull-right"><%= number_to_currency(@card.rewards.first.spending_amount, precision: 0) %></span>
                  </div>
                  <div class="mile clearfix">
                    <span class="skin-color">Length of Time:</span>
                    <span class="mileage pull-right"><%= pluralize(@card.rewards.first.length_of_time, "Month") %></span>
                  </div>
                  <span class="price clearfix">
                    <small class="pull-left">Good Time to Apply:</small>
                    <span class="pull-right">YES</span>
                  </span>
                <% else %>
                  <h6 class="box-title" id="click-here-favorite"><a href="/best-credit-card-offers">This card does not have bonus information.</a></h6>
                <% end %>
              </div>
              <a class="button yellow full-width uppercase btn-small" href="#">add to favorites</a>
          </div>
        </article>
      </div>
      <!-- End Side Panel - Card Info -->
    </div>
  </div>
</section><br><br>

<!-- Reward Graph -->
  <div class="container reward-graph-container">
    <div class="row">
      <h2 class="sign-up-bonus-title">Sign Up Bonus Over Time</h2>
      <h1 class="sign-up-bonus-h1-title">No Bonus Information for This Card</a></h1>
      <h1 class="sign-up-bonus-h1-subtitle">But Here are Some Cards That Do!</a></h1>

      <!-- Cards With Bonuses Partial  -->
      <% if !@card.card_has_bonus? %>
        <%= render partial: "cards_with_bonuses" %>
      <% end %>
      <div id='loaderImg'>
        <%= image_tag("loader.gif") %>
      </div>
      <!-- End Cards With Bonuses  -->

      <div id="reward-chart" style="height: 300px;">
      </div>
    </div>
  </div>
<!-- End - Reward Graph -->

<!-- Related Cards -->
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h3 class="page-header related-card-header">Related <%= @card.featured_cards_category_name %> Cards</h3>
    </div>
    <% @card.featured_cards.each do |card| %>
      <div class="related-cards">
        <div class="col-sm-3 col-xs-6">
          <%= link_to image_tag(card.image_link, class:"img-responsive img-hover img-related related-card-image"), card_path(card) %>
          <p class="related-card-name"><%= link_to card.name, card_path(card) %></p>
        </div>
      </div>
    <% end %>
  </div>
</div>
<hr>
<!-- End - Related Cards -->

<%= javascript_include_tag "https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.js" %>
<%= javascript_include_tag "https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.js" %>